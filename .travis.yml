language: python
python:
- 3.5
rvm:
- 2.0.0
services:
- docker
env:
  global:
  - OSGEO4A_SDK=opengisch/qfield-sdk:20190221
  - secure: F/ZK5SAnvJBg48HcpDH7T0zQ5MUznOoWqJ2vTvr05HyURVfW3OhdJMCeDM1omU1KH6wNO+2NoM4wFOHD9NHiORNa60Nj5j7gAKqaq2M+rCGSAoKWATh+Ooj3NY1aHgn00DTkMGvD6nbr508Rqu4XxRVapatwtMXDzRmiPpCi7gtOA3KyoSrXGk88PBF19B2Kp1dOkejHe6BO0mpRg2eSNDxBZwSd66euZu9cgSpPgTLN6fG6opIkaTZwrY2Zh8GiftNeZ9bSvVSAoOZ4HozVJVkYYOJivQcOcoZkkD8dMqHPO9sK2mwsfoTxiENqK3Bb/q/1oFKqgdUd4QC03MHyMVlNiToUHgMPhSv2baGKXBmacDlJqSaiBEAW/4Z62v2wXcrv8VdWOu2EJ/ccGGW0kHWbRYKqfATNgToy45itXWclaq15Vq/nX1FzBWHDVYbOpdcU7B08+Dg7+mpoZF9bhxh6L1ywEON7ZIjLIaQzxscOz5iFqTJBViaFuTHck0XrdW/gdPo3xTVM9FS+RfoxwTesVp6wyCooCmrPaB/Obsxv1UqYl1Ulxl3ZDQuOZjunwxdFP+7dEkhDNmh1ZB34B6cJGV7HZHD0tUtmj2J4m1CjwKuiUn7ZuVJmsxTy8OvzWsrfOIVwdY5nUFg8sEucBcnEX7AGRP0S+8VmNMyTTKg=
  - secure: FZ1aueOcSe5EhlDwZAS0PMHrPQbfvFJux6r8G2005HYTDIVYIaRvvi94hV6W9cmF7t+hs0YTYp73G9XORhFTFR1NJNRX4tHYabBCQPt5LooUGKxDNPzsejY0ipYygzmkMsSy4OKczIX+/pMPOM32W1cbLPJ16xPhNvoI7ueDCEvdpZeX8Pif8URV4QbDvKx0HOXovsX1xQ+gDzzjA4a3Ntp/QU291A0cKzP0e5u/iw7T8sYrq94JeMkH6XqYvelRbVRzb9+4WhYH3hTyVCZtiMHIzapTHAe86zQJrWWM7kM8udldMfgyV4rmxRw1kAO8lts3NHqaxVWXnCT5KL0bcIlfNKeS0wcIVVwxPDMASkxLpTaV7tkIJMK9C0D2PUL22DiDVhYhDp772uKAf3h4/vKW7/ZWmbIPU0CN0+gWaP9Ij1EJIn3cXYh/LyL+weZnv+4K4DBDFCeYQn/moFCI6JVgsyUP1yoflqHe4x73lOATtMmgUyQ6Jg7d1vVQmfULXbK0U18eSUx/Q6445a+bvO/i1spHph07ZNUB6XwXSTgsbUcShOkGmJ12X2DDzsgosCbtBBwM41LuvyPZ41aurik3RqafGtD93xn+CCQWYef0rcb29XL/EM5mlf33jzyZj5ctKlzp5EQ7roNYeZDcgGBEuVL1p7zRrKRUQIpeu88=

before_install:
- gem update --system
- gem --version
- pip3 install dropbox
script:
- docker pull ${OSGEO4A_SDK}
- docker run -v $(pwd):/usr/src/input -e "BUILD_FOLDER=build-${ARCH}" -e "ARCH=${ARCH}"
  -e "VERSION=${TRAVIS_TAG}" ${OSGEO4A_SDK} /usr/src/input/scripts/docker-build.sh
- "./scripts/upload-artifacts.sh"
jobs:
  include:
  - stage: build
    name: build ARMv7
    env:
    - ARCH=armv7
